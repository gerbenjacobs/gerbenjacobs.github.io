<!doctype html><html lang=en><head><meta charset=utf-8><meta name=description content="I finished what I thought would be a small story the other day. A blogpost about the dangers of pokering story points."><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65 crossorigin=anonymous><link rel=stylesheet type=text/css href=/css/style.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200&family=Permanent+Marker&display=swap" rel=stylesheet><link rel=author href=/humans.txt><link rel=webmention href=https://webmention.io/gerben.dev/webmention><meta property="og:url" content="https://blog.gerbenjacobs.nl/how-many-points-would-you-give-this-story/"><meta property="og:type" content="website"><meta property="og:title" content="How many points would you give this story?"><meta property="og:description" content="I finished what I thought would be a small story the other day. A blogpost about the dangers of pokering story points."><meta property="og:image" content="https://blog.gerbenjacobs.nl/img/flickr-theonewithout-norway-laguna.png"><meta name=twitter:card content="summary_large_image"><meta property="twitter:domain" content="blog.gerbenjacobs.nl"><meta property="twitter:url" content="https://blog.gerbenjacobs.nl/how-many-points-would-you-give-this-story/"><meta name=twitter:title content="How many points would you give this story?"><meta name=twitter:description content="I finished what I thought would be a small story the other day. A blogpost about the dangers of pokering story points."><meta name=twitter:image content="https://blog.gerbenjacobs.nl/img/flickr-theonewithout-norway-laguna.png"><meta itemprop=name content="How many points would you give this story?"><meta itemprop=description content="I finished what I thought would be a small story the other day. A blogpost about the dangers of pokering story points."><meta itemprop=datePublished content="2018-01-05T18:00:00+00:00"><meta itemprop=dateModified content="2024-10-05T17:23:37+02:00"><meta itemprop=wordCount content="818"><meta itemprop=keywords content="Tech,Agile"><script async src="https://www.googletagmanager.com/gtag/js?id=G-KKSLTF3X24"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-KKSLTF3X24")}</script><link rel=alternate type=application/rss+xml href=https://blog.gerbenjacobs.nl/posts/index.xml title="Gerben Jacobs"><script>const prefersDarkScheme=window.matchMedia("(prefers-color-scheme: dark)");document.addEventListener("DOMContentLoaded",function(){toggleDarkMode()});function determineDarkMode(){let t=prefersDarkScheme.matches,e=localStorage.getItem("darkmode");return e==="true"||e!=="false"&&t}function toggleDarkMode(){let s=determineDarkMode(),e=document.querySelectorAll(".card"),t=document.querySelectorAll(".btn"),n=document.querySelectorAll(".list-group-item");if(s){document.body.classList.add("dark-theme");for(let t of e)t.classList.add("text-bg-dark");for(let e of t)e.classList.add("btn-secondary"),e.classList.remove("btn-primary");for(let e of n)e.classList.add("list-group-item-dark")}else{document.body.classList.remove("dark-theme");for(let t of e)t.classList.remove("text-bg-dark");for(let e of t)e.classList.remove("btn-secondary"),e.classList.add("btn-primary");for(let e of n)e.classList.remove("list-group-item-dark")}}</script><script defer src=/js/main.js></script><title>How many points would you give this story? | Gerben Jacobs</title></head><body class="d-flex flex-column"><nav id=nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container-fluid><a class=navbar-brand href=https://blog.gerbenjacobs.nl/>Gerben Jacobs</a><ul class="navbar-nav d-flex mb-2 mb-lg-0"><li class=nav-item><a id=darkmode class="btn btn-primary" title="Toggle dark mode">üåì</a></li></ul></div></nav><main id=content class=container><div class="row justify-content-center"><div class="col-xl-6 col-lg-8 col-md-11"><article class=h-entry><header><h1 class=p-name>How many points would you give this story?</h1></header>üîó <a href=https://blog.gerbenjacobs.nl/how-many-points-would-you-give-this-story/ class="u-url post-link">Permalink</a>
&mdash;
üìÖ
<time class=dt-published datetime="2018-01-05 18:00:00 +0000 UTC">Jan 5, 2018</time> &mdash;
üßÆ 818 words
&mdash; üè∑Ô∏è
<a class=p-category href=https://blog.gerbenjacobs.nl/tags/tech rel=tag><span class="badge bg-secondary">tech</span></a>
<a class=p-category href=https://blog.gerbenjacobs.nl/tags/agile rel=tag><span class="badge bg-secondary">agile</span></a><hr class=rainbow><strong>Table of contents</strong><nav id=TableOfContents><ul><li><a href=#background>Background</a></li><li><a href=#the-story>The story</a></li><li><a href=#what-i-needed-to-do>What I needed to do..</a></li><li><a href=#no-small-task>No small task</a></li></ul></nav><hr class=rainbow><div class=e-content><p>It‚Äôs time for a mental exercise. You are going to give <a href=https://www.atlassian.com/agile/project-management/estimation>story points</a> to a user story, that I actually completed.
Then I‚Äôm going to tell you what I had to do and which issues I ran into.</p><h2 id=background>Background</h2><p>We have a page that lists birthdays for people on that day, but excluding the current year. This way we can showcase everyone who is 1 year or older.</p><p>This is nice, but if you want to find birthdays for a specific date, you might have to wait a year for it to come around.</p><p>Time to add a form that allows us to pick a specific date!</p><p><em>The site is multilingual and we are using PHP.</em></p><h2 id=the-story>The story</h2><figure class="figure figure-right"><img loading=lazy class="figure-img img-fluid rounded" src=/img/blog/2018/form_birthday.png alt="Birthday form"><figcaption class=figure-caption>Birthday form</figcaption></figure><p>Add a form to the page that lets you select a specific date or all days by adding &ldquo;All years&rdquo; to the year field.
Have the form post to a different route than the actual birthday page.</p><p>So? How much story points would you give this? Is it a small, medium or large task?
Try to think of the things you have to do.</p><p>Good, now let‚Äôs find out what I had to do..</p><h2 id=what-i-needed-to-do>What I needed to do..</h2><ul><li>Add a new route for the form handling</li><li>Create the HTML for the form<ul><li>Fill 3 <code>&lt;select></code> dropdowns with day, month and year</li><li>Add a separate <code>&lt;option></code> for &ldquo;All years&rdquo;</li><li>Add logic to put &ldquo;selected&rdquo; on the current (or selected) date</li></ul></li><li>Add new routes for the date specific birthday page (for SEO and share-ability reasons)<ul><li>One for a complete date: <code>/birthdays/{date}</code></li><li>One for a specific day: <code>/birthdays/{month}/{day}</code></li></ul></li><li>Validate the incoming request<ul><li>Do we have &ldquo;full date&rdquo; option, if so is it not empty?</li><li>Do we have &ldquo;date only&rdquo;? Then we must have <code>month</code> and <code>day</code> parameters</li><li>We have neither? Then use the original logic</li></ul></li><li>Validate the date<ul><li>&ldquo;Full date&rdquo;: try to parse the string as a date</li><li>&ldquo;Date only&rdquo;: see if month is range <code>1</code> to <code>12</code> and day in range <code>1</code> to <code>31</code></li></ul></li><li>Update the model/repository<ul><li>The function now needs to take in a date and a boolean whether we want &ldquo;full date&rdquo; or &ldquo;date only&rdquo;</li><li>If we‚Äôre using &ldquo;date only&rdquo; we can reuse the current query; show all birthdays on this day/month but skip the current year</li><li>For &ldquo;full date&rdquo; we need to write a new query &ndash; side quest: what is the most efficient way to search on date in MySQL</li></ul></li><li>Other small changes<ul><li>Change the title of the page to show which specific date is used, unless it‚Äôs the old logic (SEO)</li><li>Send the actual picked date along to the view</li><li>Change all new text to translatable strings and translate them</li><li>Use automatic month translation in the form by setting the correct <code>LC_TIME</code> locale</li></ul></li></ul><p>During this process a couple of complications showed up.</p><ul><li>Because of the automatic setting of the current date, the &ldquo;All years&rdquo; option is never chosen &ndash; but I‚Äôm okay with that</li><li>The date validation does not handle days gracefully i.e. february 31st is possible to select.
I tried to use <a href=https://github.com/briannesbitt/Carbon>Carbon</a> to parse the date, but when you entered 50 as day, it would just roll over to the next month &ndash; not what I want</li><li>I was having a weird bug where my query worked, but the date on the page was the next day.
Turned out that Carbon and the underlying <code>DateTime</code> operations are done on the object.
To fix it I <code>.clone()</code> the date in my query function as not to mess with the input date. I can‚Äôt remember ever having to do this in PHP before..</li><li>To prevent regression and keep it feeling the same, I had to add logic for when the selected date was equal to the current date &ndash;
that meant I would redirect back to the normal <code>/birthdays</code> endpoint and not show the date in the title</li><li><code>setlocale()</code> and friends also kept me running in circles for a while. I started programming on my Macbook,
but then moved to my Windows PC and also had to check the Linux server that the site actually runs on.
Turns out there‚Äôs no simple OS-agnostic way to get the correct locale if you only have a country code &ndash;
in the end I just created a small custom array to map country codes to locales</li></ul><h2 id=no-small-task>No small task</h2><p>Did you pick a low amount of story points? So did I!</p><p>If you read the story you think all you have to do is add a form and change the query for fetching birthdays a bit.
But then you have to add user interface, user experience, security, validation and ideally have tests too.
Then, if you care about SEO and multilingualism, you have to add that too!</p><p>So it appears that the theory &ldquo;estimating (or <em>pokering</em>) for points is hard&rdquo; also holds true in practice
and that whatever you pick in the beginning, you better double it!</p></div></article><hr class=rainbow><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//gerbenjacobs.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div class="row justify-content-center"><div class="col-xl-6 col-lg-8 col-md-11"><div class=row><div class=col-md-6><div class=card><img loading=lazy src=https://blog.gerbenjacobs.nl/img/github-social.webp class="card-img-top card-img-height" alt="First month at GitHub"><div class=card-body><span class=card-title title="First month at GitHub">First month at GitHub</span></div><div class=card-footer><a href=https://blog.gerbenjacobs.nl/first-month-at-github/ class="btn btn-primary">&#171; Next</a></div></div></div><div class=col-md-6><div class=card><img loading=lazy src=https://blog.gerbenjacobs.nl/img/airballoon_b.jpg class="card-img-top card-img-height" alt="My first open source project"><div class=card-body><span class=card-title title="My first open source project">My first open source project</span></div><div class="card-footer text-end"><a href=https://blog.gerbenjacobs.nl/my-first-open-source-project/ class="btn btn-primary">Previous &#187;</a></div></div></div></div><div class=row><div class=col>Find any post in the <a href=/posts/archive/>archive</a>.</div></div></div></div></main><footer class="footer mt-4 py-3 bg-light rainbow" id=footer><p>Copyright &copy; 2024 Gerben Jacobs</p><a href=/posts/index.xml><span class="badge p-1 footer-social" style=border-color:orange><img src=/img/social/rss.svg alt=RSS>
</span></a><a href=https://twitter.com/gerbenjacobs rel=me><span class="badge p-1 footer-social" style=border-color:#1da1f2><img src=/img/social/twitter.svg alt=Twitter>
</span></a><a href=https://github.com/gerbenjacobs rel=me><span class="badge p-1 footer-social" style=border-color:#181717><img src=/img/social/github.svg alt=GitHub>
</span></a><a href=https://todon.nl/@gerben rel=me><span class="badge p-1 footer-social" style=border-color:#6364ff><img src=/img/social/mastodon.svg alt=Mastodon>
</span></a><a href=https://linkedin.com/in/gerbenjacobs rel=me><span class="badge p-1 footer-social" style=border-color:#0a66c2><img src=/img/social/linkedin.svg alt=LinkedIn></span></a></footer><button class=btn id=btn-back-to-top>‚òùÔ∏è</button></body></html>