<!doctype html><html lang=en class=h-100><head><meta charset=utf-8><meta name=description content="Insert a value into a specific index of a PHP array"><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65 crossorigin=anonymous><link rel=stylesheet type=text/css href=/css/style.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200&family=Permanent+Marker&display=swap" rel=stylesheet><link rel=author href=/humans.txt><meta property="og:url" content="https://blog.gerbenjacobs.nl/array_push_insert-push-new-value-into-array-with-php/"><meta property="og:type" content="website"><meta property="og:title" content="array_push_insert: Push new value into array with PHP"><meta property="og:description" content="Insert a value into a specific index of a PHP array"><meta property="og:image" content="https://blog.gerbenjacobs.nl/img/post-bg-06.jpg"><meta name=twitter:card content="summary_large_image"><meta property="twitter:domain" content="blog.gerbenjacobs.nl"><meta property="twitter:url" content="https://blog.gerbenjacobs.nl/array_push_insert-push-new-value-into-array-with-php/"><meta name=twitter:title content="array_push_insert: Push new value into array with PHP"><meta name=twitter:description content="Insert a value into a specific index of a PHP array"><meta name=twitter:image content="https://blog.gerbenjacobs.nl/img/post-bg-06.jpg"><meta itemprop=name content="array_push_insert: Push new value into array with PHP"><meta itemprop=description content="Insert a value into a specific index of a PHP array"><meta itemprop=datePublished content="2011-05-19T12:00:00+00:00"><meta itemprop=dateModified content="2022-11-29T00:22:35+01:00"><meta itemprop=wordCount content="326"><meta itemprop=keywords content="Tech,Php"><script async src="https://www.googletagmanager.com/gtag/js?id=G-KKSLTF3X24"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-KKSLTF3X24")}</script><script>const prefersDarkScheme=window.matchMedia("(prefers-color-scheme: dark)");document.addEventListener("DOMContentLoaded",function(){toggleDarkMode()});function determineDarkMode(){let t=prefersDarkScheme.matches,e=localStorage.getItem("darkmode");return e==="true"||e!=="false"&&t}function toggleDarkMode(){let s=determineDarkMode(),e=document.querySelectorAll(".card"),t=document.querySelectorAll(".btn"),n=document.querySelectorAll(".list-group-item");if(s){document.body.classList.add("dark-theme");for(let t of e)t.classList.add("text-bg-dark");for(let e of t)e.classList.add("btn-secondary"),e.classList.remove("btn-primary");for(let e of n)e.classList.add("list-group-item-dark")}else{document.body.classList.remove("dark-theme");for(let t of e)t.classList.remove("text-bg-dark");for(let e of t)e.classList.remove("btn-secondary"),e.classList.add("btn-primary");for(let e of n)e.classList.remove("list-group-item-dark")}}</script><script defer src=/js/main.js></script><title>array_push_insert: Push new value into array with PHP | Gerben Jacobs</title></head><body class="d-flex flex-column h-100"><nav id=nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container-fluid><a class=navbar-brand href=/>Gerben Jacobs</a><ul class="navbar-nav d-flex mb-2 mb-lg-0"><li class=nav-item><a id=darkmode class="btn btn-primary" title="Toggle dark mode">üåì</a></li></ul></div></nav><div id=content class=container><div class="row justify-content-center"><div class="col-xl-6 col-lg-8 col-md-11"><article><header><h1>array_push_insert: Push new value into array with PHP</h1></header>üìÖ
<time datetime=2011-05-19>May 19, 2011</time> &mdash;
üßÆ 326 words
&mdash; üè∑Ô∏è
<a href=https://blog.gerbenjacobs.nl/tags/tech><span class="badge bg-secondary">tech</span></a>
<a href=https://blog.gerbenjacobs.nl/tags/php><span class="badge bg-secondary">php</span></a><hr class=rainbow><div class="alert alert-primary" role=alert>This blogpost is for historical purposes.
There is a better way with <a href=https://www.php.net/manual/en/function.array-splice.php>array_splice</a>.</div><p>At work today, my colleague needed to add, or rather 'insert', a value into an existing array <em>AND</em> on a
specific index.
This because we fed it into a JS table sorter, once we pulled it through <code>json_encode()</code>.</p><p>So what we really required: <strong><code>array_push_insert</code></strong></p><p>We couldn't find any existing <a href=https://www.php.net/manual/en/ref.array.php>Array function</a> at php.net,
so
I decided to make my own version.</p><p>At first I wanted it to work with associative arrays too, but it got complicated fast and at the time we didn't even
need it; feature creep.
So for now it only works with numeric array keys.</p><p><strong>What it does..</strong></p><p>First it checks whether the index you supplied (<code>$index</code>) is available in the array
(<code>$array</code>), if so, dissects the array in half,
starting from the point you supplied (<code>$index</code>) (there's no default function for this either, so I used
array_slice).
You now have a 'first' and a 'last' array. Then you add your value (<code>$value</code>) to the first array, merge
both arrays back together, and you're done!</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>function</span> <span style=color:#a6e22e>array_push_insert</span>($array, $index, $value) {
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>array_key_exists</span>($index, $array)) {
</span></span><span style=display:flex><span>        $firstArray <span style=color:#f92672>=</span> <span style=color:#a6e22e>array_slice</span>($array, <span style=color:#ae81ff>0</span>, ($index <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>));
</span></span><span style=display:flex><span>        $lastArray <span style=color:#f92672>=</span> <span style=color:#a6e22e>array_slice</span>($array, ($index <span style=color:#f92672>+</span> <span style=color:#ae81ff>1</span>));
</span></span><span style=display:flex><span>        <span style=color:#a6e22e>array_push</span>($firstArray, $value);
</span></span><span style=display:flex><span>        $array <span style=color:#f92672>=</span> <span style=color:#a6e22e>array_merge</span>($firstArray, $lastArray);
</span></span><span style=display:flex><span>    }
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>return</span> $array;
</span></span><span style=display:flex><span>}
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p><strong>Example</strong></p><p>We call the function and supply it with our original array, the index after which we want our new value to be
inserted and the value itself.
So in the next example, we want to add the letter "D" after the "B", and this value's key is 1. So we send in the
array ($array), the key (1) and our new value ("D").</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span>$array <span style=color:#f92672>=</span> <span style=color:#66d9ef>array</span>(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;A&#34;</span>, <span style=color:#75715e>// 0
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;B&#34;</span>, <span style=color:#75715e>// 1
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#34;C&#34;</span> <span style=color:#75715e>// 2
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>$finalArray <span style=color:#f92672>=</span> <span style=color:#a6e22e>array_push_insert</span>($array, <span style=color:#ae81ff>1</span>, <span style=color:#e6db74>&#34;D&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>So when we print_r() the <code>$finalArray</code>, it looks like this:</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>Array</span> (
</span></span><span style=display:flex><span>    [<span style=color:#ae81ff>0</span>] <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>A</span>
</span></span><span style=display:flex><span>    [<span style=color:#ae81ff>1</span>] <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>B</span>
</span></span><span style=display:flex><span>    [<span style=color:#ae81ff>2</span>] <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>D</span>
</span></span><span style=display:flex><span>    [<span style=color:#ae81ff>3</span>] <span style=color:#f92672>=&gt;</span> <span style=color:#a6e22e>C</span>
</span></span><span style=display:flex><span>)
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div></article><hr class=rainbow><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//gerbenjacobs.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div class="row justify-content-center"><div class="col-xl-6 col-lg-8 col-md-11"><div class=row><div class=col-md-6><div class=card><img loading=lazy src=https://blog.gerbenjacobs.nl/img/post-bg-04.jpg class="card-img-top card-img-height" alt="How to programmatically add an IP address to a Shoutcast Reserved IP list in PHP"><div class=card-body><span class=card-title title="How to programmatically add an IP address to a Shoutcast Reserved IP list in PHP">How to programmatically add an...</span></div><div class=card-footer><a href=https://blog.gerbenjacobs.nl/how-to-programmatically-add-an-ip-address-to-a-shoutcast-reserved-ip-list-in-php/ class="btn btn-primary">&#171; Next</a></div></div></div><div class=col-md-6><div class=card><img loading=lazy src=https://blog.gerbenjacobs.nl/img/post-bg-02.jpg class="card-img-top card-img-height" alt="T-Mobile traffic through http://1.2.3.12"><div class=card-body><span class=card-title title="T-Mobile traffic through http://1.2.3.12">T-Mobile traffic through...</span></div><div class="card-footer text-end"><a href=https://blog.gerbenjacobs.nl/t-mobile-traffic-through-1-2-3-12/ class="btn btn-primary">Previous &#187;</a></div></div></div></div><div class=row><div class=col>Find any post in the <a href=/posts/archive/>archive</a>.</div></div></div></div></div><footer class="footer mt-4 py-3 bg-light rainbow" id=footer><p>Copyright &copy; 2024 Gerben Jacobs</p><a href=/index.xml><span class="badge p-1 footer-social" style=border-color:orange><img src=/img/social/rss.svg alt=RSS>
</span></a><a href=https://twitter.com/gerbenjacobs><span class="badge p-1 footer-social" style=border-color:#1da1f2><img src=/img/social/twitter.svg alt=Twitter>
</span></a><a href=https://github.com/gerbenjacobs><span class="badge p-1 footer-social" style=border-color:#181717><img src=/img/social/github.svg alt=GitHub>
</span></a><a href=https://todon.nl/@gerben rel=me><span class="badge p-1 footer-social" style=border-color:#6364ff><img src=/img/social/mastodon.svg alt=Mastodon>
</span></a><a href=https://linkedin.com/in/gerbenjacobs><span class="badge p-1 footer-social" style=border-color:#0a66c2><img src=/img/social/linkedin.svg alt=LinkedIn></span></a></footer><button class=btn id=btn-back-to-top>‚òùÔ∏è</button></body></html>