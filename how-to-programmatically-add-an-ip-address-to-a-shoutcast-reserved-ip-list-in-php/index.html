<!doctype html><html lang=en class=h-100><head><meta charset=utf-8><meta name=description content="If you have a private Shoutcast server you need to add IP addresses to the Reserved IP List (RIP). Find out how to do this automatically in PHP."><meta name=viewport content="width=device-width,initial-scale=1"><link href=https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65 crossorigin=anonymous><link rel=stylesheet type=text/css href=/css/style.css><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Nunito:wght@200&family=Permanent+Marker&display=swap" rel=stylesheet><link rel=author href=/humans.txt><meta property="og:url" content="https://blog.gerbenjacobs.nl/how-to-programmatically-add-an-ip-address-to-a-shoutcast-reserved-ip-list-in-php/"><meta property="og:type" content="website"><meta property="og:title" content="How to programmatically add an IP address to a Shoutcast Reserved IP list in PHP"><meta property="og:description" content="If you have a private Shoutcast server you need to add IP addresses to the Reserved IP List (RIP). Find out how to do this automatically in PHP."><meta property="og:image" content="https://blog.gerbenjacobs.nl/img/post-bg-04.jpg"><meta name=twitter:card content="summary_large_image"><meta property="twitter:domain" content="blog.gerbenjacobs.nl"><meta property="twitter:url" content="https://blog.gerbenjacobs.nl/how-to-programmatically-add-an-ip-address-to-a-shoutcast-reserved-ip-list-in-php/"><meta name=twitter:title content="How to programmatically add an IP address to a Shoutcast Reserved IP list in PHP"><meta name=twitter:description content="If you have a private Shoutcast server you need to add IP addresses to the Reserved IP List (RIP). Find out how to do this automatically in PHP."><meta name=twitter:image content="https://blog.gerbenjacobs.nl/img/post-bg-04.jpg"><meta itemprop=name content="How to programmatically add an IP address to a Shoutcast Reserved IP list in PHP"><meta itemprop=description content="If you have a private Shoutcast server you need to add IP addresses to the Reserved IP List (RIP). Find out how to do this automatically in PHP."><meta itemprop=datePublished content="2012-04-07T12:00:00+00:00"><meta itemprop=dateModified content="2022-11-29T00:22:35+01:00"><meta itemprop=wordCount content="353"><meta itemprop=keywords content="Tech,Php"><script async src="https://www.googletagmanager.com/gtag/js?id=G-KKSLTF3X24"></script><script>var dnt,doNotTrack=!1;if(!1&&(dnt=navigator.doNotTrack||window.doNotTrack||navigator.msDoNotTrack,doNotTrack=dnt=="1"||dnt=="yes"),!doNotTrack){window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date),gtag("config","G-KKSLTF3X24")}</script><script src=/js/main.js></script><title>How to programmatically add an IP address to a Shoutcast Reserved IP list in PHP | Gerben Jacobs</title></head><body class="d-flex flex-column h-100"><nav id=nav class="navbar navbar-expand-lg navbar-dark bg-dark"><div class=container-fluid><a class=navbar-brand href=/>Gerben Jacobs</a><ul class="navbar-nav d-flex mb-2 mb-lg-0"><li class=nav-item><a id=darkmode class="btn btn-primary" title="Toggle dark mode">üåì</a></li></ul></div></nav><div id=content class=container><div class="row justify-content-center"><div class="col-xl-6 col-lg-8 col-md-11"><article><header><h1>How to programmatically add an IP address to a Shoutcast Reserved IP list in PHP</h1></header>üìÖ
<time datetime=2012-04-07>Apr 7, 2012</time> &mdash;
üßÆ 353 words
&mdash; üè∑Ô∏è
<a href=https://blog.gerbenjacobs.nl/tags/tech><span class="badge bg-secondary">tech</span></a>
<a href=https://blog.gerbenjacobs.nl/tags/php><span class="badge bg-secondary">php</span></a><hr class=rainbow><p>Pretty semantic title, huh? But that's basically what this is all about.</p><figure class=figure><img loading=lazy class="figure-img img-fluid rounded" src=/img/blog/2012/shoutcast.gif alt="Shoutcast logo"><figcaption class=figure-caption>Shoutcast logo</figcaption></figure><p>If you have a Shoutcast host that is set to private, only people whose IP address in the RIP list (Reserved IP) can access your stream.<br>A lot of free Shoutcast server providers do this, to make it a bit less profitable to free ride their services.</p><p>Let's have a quick look at the code and then analyze it to understand what it's doing.</p><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-php data-lang=php><span style=display:flex><span><span style=color:#f92672>&lt;?</span><span style=color:#a6e22e>php</span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Config
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>$username <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;admin&#39;</span>;
</span></span><span style=display:flex><span>$password <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;password&#39;</span>;
</span></span><span style=display:flex><span>$host <span style=color:#f92672>=</span> <span style=color:#e6db74>&#39;myshoutcastserver.com&#39;</span>;
</span></span><span style=display:flex><span>$port <span style=color:#f92672>=</span> <span style=color:#ae81ff>8080</span>;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Set up URL
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>$ip <span style=color:#f92672>=</span> <span style=color:#a6e22e>explode</span>(<span style=color:#e6db74>&#39;.&#39;</span>, $_SERVER[<span style=color:#e6db74>&#39;REMOTE_ADDR&#39;</span>]);
</span></span><span style=display:flex><span>$url <span style=color:#f92672>=</span> <span style=color:#a6e22e>sprintf</span>(<span style=color:#e6db74>&#39;http://%s:%d/admin.cgi?mode=ripip&amp;ip1=%d&amp;ip2=%d&amp;ip3=%d&amp;ip4=%d&#39;</span>,
</span></span><span style=display:flex><span>    $host, $port, $ip[<span style=color:#ae81ff>0</span>], $ip[<span style=color:#ae81ff>1</span>], $ip[<span style=color:#ae81ff>2</span>], $ip[<span style=color:#ae81ff>3</span>]
</span></span><span style=display:flex><span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// Create context stream
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span>$context <span style=color:#f92672>=</span> <span style=color:#a6e22e>stream_context_create</span>(<span style=color:#66d9ef>array</span>(
</span></span><span style=display:flex><span>    <span style=color:#e6db74>&#39;http&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>array</span>(
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;method&#39;</span> <span style=color:#f92672>=&gt;</span> <span style=color:#e6db74>&#39;GET&#39;</span>,
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;user_agent&#39;</span>  <span style=color:#f92672>=&gt;</span> $_SERVER[<span style=color:#e6db74>&#39;HTTP_USER_AGENT&#39;</span>],
</span></span><span style=display:flex><span>        <span style=color:#e6db74>&#39;header&#39;</span>  <span style=color:#f92672>=&gt;</span> <span style=color:#66d9ef>array</span>(
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;Authorization: Basic &#39;</span> <span style=color:#f92672>.</span> <span style=color:#a6e22e>base64_encode</span>(<span style=color:#e6db74>&#34;</span><span style=color:#e6db74>$username</span><span style=color:#e6db74>:</span><span style=color:#e6db74>$password</span><span style=color:#e6db74>&#34;</span>),
</span></span><span style=display:flex><span>            <span style=color:#e6db74>&#39;Accept: text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8&#39;</span>
</span></span><span style=display:flex><span>        )
</span></span><span style=display:flex><span>    )
</span></span><span style=display:flex><span>));
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// A poor mans CURL request
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>file_get_contents</span>($url, <span style=color:#66d9ef>false</span>, $context);
</span></span><span style=display:flex><span><span style=color:#75715e>?&gt;</span><span style=color:#960050;background-color:#1e0010>
</span></span></span></code></pre></div><p>First we get the IP address of the visitor, we explode() it on the dots to get 4 separate numbers, together forming a valid IP address.<br>Then we set up a URL that will look like this: <strong>https://myshoutcastserver.com:8080/admin.cgi?mode=ripip&ip1=127&ip2=0&ip3=0&ip4=1</strong></p><p>This URL will submit (GET) a form that adds the IP to the RIP list. See why we had to separate the IP on the dots?
'Why' you ask, well because this is somewhat of a hack. We fill the form through GET parameters.</p><p>Of course the admin.cgi page is behind a password protected bit. This is however a simple Basic Authorization, so we create a stream context and add Basic Authorization.</p><p>Shoutcast Servers aren't completely dumb, only a little. But they're smart enough to notice 'robots'.
So we also add some headers to make it believe we are a real browser and that we would like to accept normal HTML back.
We don't really need anything back at all, so that's why you don't have to do anything with the data you get back from file_get_contents.</p><p>Just running the command, with the context stream and the pimped out URL is enough to add an IP to the Reserved IP List in Shoutcast. <strong>You're done!</strong></p></article><hr class=rainbow><div id=disqus_thread></div><script>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//gerbenjacobs.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></div></div><div class="row justify-content-center"><div class="col-xl-6 col-lg-8 col-md-11"><div class=row><div class=col-md-6><div class=card><img loading=lazy src=https://blog.gerbenjacobs.nl/img/post-bg-05.jpg class="card-img-top card-img-height" alt="Perfect separator for Shoutcast 7.html file"><div class=card-body><span class=card-title title="Perfect separator for Shoutcast 7.html file">Perfect separator for...</span></div><div class=card-footer><a href=https://blog.gerbenjacobs.nl/perfect-separator-for-shoutcast-7.html-file/ class="btn btn-primary">&#171; Next</a></div></div></div><div class=col-md-6><div class=card><img loading=lazy src=https://blog.gerbenjacobs.nl/img/post-bg-06.jpg class="card-img-top card-img-height" alt="array_push_insert: Push new value into array with PHP"><div class=card-body><span class=card-title title="array_push_insert: Push new value into array with PHP">array_push_insert: Push new...</span></div><div class="card-footer text-end"><a href=https://blog.gerbenjacobs.nl/array_push_insert-push-new-value-into-array-with-php/ class="btn btn-primary">Previous &#187;</a></div></div></div></div><div class=row><div class=col>Find any post in the <a href=/posts/archive/>archive</a>.</div></div></div></div></div><footer class="footer mt-4 py-3 bg-light rainbow" id=footer><p>Copyright &copy; 2024 Gerben Jacobs</p><a href=/index.xml><span class="badge p-1 footer-social" style=border-color:orange><img src=/img/social/rss.svg alt=RSS>
</span></a><a href=https://twitter.com/gerbenjacobs><span class="badge p-1 footer-social" style=border-color:#1da1f2><img src=/img/social/twitter.svg alt=Twitter>
</span></a><a href=https://github.com/gerbenjacobs><span class="badge p-1 footer-social" style=border-color:#181717><img src=/img/social/github.svg alt=GitHub>
</span></a><a href=https://todon.nl/@gerben rel=me><span class="badge p-1 footer-social" style=border-color:#6364ff><img src=/img/social/mastodon.svg alt=Mastodon>
</span></a><a href=https://linkedin.com/in/gerbenjacobs><span class="badge p-1 footer-social" style=border-color:#0a66c2><img src=/img/social/linkedin.svg alt=LinkedIn></span></a></footer><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4344810300258970" crossorigin=anonymous></script><button class=btn id=btn-back-to-top>‚òùÔ∏è</button></body></html>